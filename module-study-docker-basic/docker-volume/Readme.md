## 도커 볼륨

-------

도커 볼륨을 알아보기 전, 먼저 컨테이너의 중요한 특징 한 가지에 대해 살펴보자.

### 컨테이너 특징

- 컨테이너의 특징 중 하나인 **상태 없음(stateless)** 이다.
- 상태가 없다는 특징은 컨테이너가 실행된 후 발생하는 모든 변경사항은 `컨테이너 레이어에만 존재`하여 컨테이너가 종료되면 변경사항은 모두 사라진다는 것을 말한다.
- 즉, 소프트웨어의 버전 등 컨테이너의 상태변경이 필요하다면 새로운 버전의 이미지를 만들어서 배포해야 한다는 것이다.
  <br>
  ( 컨테이너의 이미지는 한번 지정된 후 변경되지 않는 **불변성**의 특징을 가진다. )

위와 같은 특징으로 인해 도커는 컨테이너에서 저장 및 공유가 필요한 데이터를 
영구적으로 저장하기 위한 기능이 필요하다.

> ✅ 도커에서는 영속성이 필요한 데이터(Database 데이터, 파일 등..)를 
저장 및 공유하기 위해 **도커 볼륨(Volume)** 이라는 기능을 제공한다. 

### 도커 볼륨(Docker Volume)

- 도커의 볼륨 기능을 통해 컨테이너의 데이터를 외부에 저장하고, 다른 컨테이너들과 공유할 수 있다.
- 컨테이너의 특정 폴더를 공유용 폴더로 만들 수 있는데, 이것을 `컨테이너 폴더를 볼륨(Volume)에 마운트`한다고 표현한다.
- 즉, 도커 볼륨은 데이터를 저장하는 **외부 저장소**이다.
- 하나의 컨테이너에는 여러 개의 볼륨을 사용할 수도 있다.
- 기본적으로 도커는 볼륨의 경로를 자동으로 관리하고 가상머신 안에서 저장되기 때문에 볼륨 경로를 사용자가 직접 접근하기 어렵다.

> ✅ 마운트란 컴퓨터의 특정 디렉토리를 외부 저장소와 연결한다는 것을 의미한다.

> ✅ 바인드 마운트 - Host OS 에서 데이터를 직접 관찰하고 싶을 때 사용하는 기능이다.
> 
> `docker run -v {마운트할 Host OS 경로} : {컨테이너 내부경로}` 명령어를 통해 사용 가능하다. 

### 명령어

- `docker run -v {도커의 볼륨명} : {컨테이너의 내부 경로}` : 컨테이너의 디렉토리를 도커 볼륨에 마운트
- `docker volume ls` : 볼륨 리스트 조회
- `docker volume inspect {볼륨명}` : 볼륨 상세정보 조회
- `docker volume create {볼륨명}` : 볼륨 생성
- `docker volume rm {볼륨명}` : 볼륨 삭제 
  <br> **(단, 컨테이너에 마운트되어 있는 볼륨은 삭제 불가하다.)**

